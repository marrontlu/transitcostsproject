<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Line Map</title><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" /><script src="https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.js"></script><link href="https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.css" rel="stylesheet" /><style>body { margin: 0; padding: 0; }#map {position: absolute;top: 0;bottom: 0;width: 100%;}.mapboxgl-popup {max-width: 400px;margin: 0px;padding: 0px;font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;}#pop-text {margin-top: 0px;margin-bottom: 0px;padding: 0px;font: 14px 'Helvetica Neue', Arial, Helvetica, sans-serif;}.map-overlay {position: absolute;bottom: 0;right: 0;background: rgba(255, 255, 255, 0.8);margin-right: 20px;font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;overflow: auto;border-radius: 3px;}#features {top: 0;height: 100px;margin-top: 20px;width: 250px;}#legend {padding: 10px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);line-height: 18px;margin-bottom: 40px;width: 110px;}.legend-key {display: inline-block;width: 10px;height:2.5px;margin-right: 5px;margin-bottom: 2.3px}.legend-circle {display: inline-block;border-radius: 50%;width: 6px;height:6px;margin-right: 8px;margin-left: 2px;}</style></head><body><div id="map"></div><div class='map-overlay' id='legend'></div><script>mapboxgl.accessToken = 'pk.eyJ1IjoiZWxpZmVuc2FyaSIsImEiOiJjam15ejN3d3EyMXRyM3FvODE3djQxcDluIn0.jn7SMI1MV_qcFxhcXT_-Eg';var map = new mapboxgl.Map({container: 'map',style: 'mapbox://styles/elifensari/ckd8qtjv100ac1iqsmp5zvve5',center: [118.7181771, 32.1375691],zoom: 11.75,maxZoom: 13.75,minZoom: 9.75});map.on('load', function() {map.addSource('completeline' , {"type":"geojson","data": "https://raw.githubusercontent.com/marrontlu/transitcostsproject/main/data/i-q/nanjing-line-s8-southern-extension-complete-line.geojson","generateId": true});map.addLayer({'id': 'completeline','type': 'line','source': 'completeline','layout': {},'paint': {'line-width': 1,'line-color':'#ADADAD',}});map.addSource('subwayline' , {"type":"geojson","data": "https://raw.githubusercontent.com/marrontlu/transitcostsproject/main/data/i-q/nanjing-line-s8-southern-extension-line.geojson","generateId": true});map.addLayer({'id': 'subwayline','type': 'line','source': 'subwayline','layout': {},'paint': {'line-width': 1,'line-color':'#EF476F',}});map.addLayer({'id': 'tunnels','type': 'line','source': 'subwayline',"filter": ["==", "tunnel", 'yes'],'layout': {},'paint': {'line-width': 1,'line-color':'#6F1F42',}});map.addLayer({'id': 'bridges','type': 'line','source': 'subwayline',"filter": ["==", "bridge", 'yes'],'layout': {},'paint': {'line-width': 2,'line-color':'#77B5CF',}});map.addLayer({'id': 'viaducts','type': 'line','source': 'subwayline',"filter": ["==", "bridge", 'viaduct'],'layout': {},'paint': {'line-width': 2,'line-color':'#77B5CF',}});map.addLayer({'id': 'aqueducts','type': 'line','source': 'subwayline',"filter": ["==", "bridge", 'aqueduct'],'layout': {},'paint': {'line-width': 2,'line-color':'#77B5CF',}});map.addLayer({'id': 'yard','type': 'line','source': 'subwayline',"filter": ["==", "service", 'yard'],'layout': {},'paint': {'line-width': 2,'line-color':'#1D3F5D',}});map.addLayer({'id': 'siding','type': 'line','source': 'subwayline',"filter": ["==", "service", 'siding'],'layout': {},'paint': {'line-width': 2,'line-color':'#1D3F5D',}});map.addSource('places' , {"type":"geojson","data": "https://raw.githubusercontent.com/marrontlu/transitcostsproject/main/data/i-q/nanjing-line-s8-southern-extension-stops.geojson","generateId": true});map.addLayer({'id': 'places1','type': 'circle','source': 'places','layout': {},'paint': {'circle-radius': 3,'circle-color': "#EF476F",}});map.addLayer({'id': 'places','type': 'circle','source': 'places','layout': {},'paint': {'circle-radius': 6,'circle-opacity':0,}});var layers = ['station','at-grade', 'tunnel', 'elevated','yard','existing/planned'];var colors = ['#EF476F','#EF476F', '#6F1F42', '#77B5CF','#1D3F5D','#ADADAD'];var layer = layers[0];var color = colors[0];var item = document.createElement('div');var key = document.createElement('span');key.className = 'legend-circle';key.style.backgroundColor = color;var value = document.createElement('span');value.innerHTML = layer;item.appendChild(key);item.appendChild(value);legend.appendChild(item);for (i = 1; i < layers.length; i++) {var layer = layers[i];var color = colors[i];var item = document.createElement('div');var key = document.createElement('span');key.className = 'legend-key';key.style.backgroundColor = color;var value = document.createElement('span');value.innerHTML = layer;item.appendChild(key);item.appendChild(value);legend.appendChild(item);}var popup = new mapboxgl.Popup({closeButton: false,closeOnClick: false});map.on('mouseenter', 'places', function(e) {map.getCanvas().style.cursor = 'pointer';var coordinates = e.features[0].geometry.coordinates.slice();var description = e.features[0].properties.name;while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;}popup.setLngLat(coordinates).setHTML("<p id='pop-text'>" + description +"</p>" ).addTo(map);});map.on('mouseleave', 'places', function() {map.getCanvas().style.cursor = '';popup.remove();});});</script></body></html>